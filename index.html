<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="translucent" />
		<title></title>Garden Maintenance Map</title>

		<!-- MapLibre GL JS -->
		<script src="https://unpkg.com/maplibre-gl@3.3.1/dist/maplibre-gl.js"></script>
		<link href="https://unpkg.com/maplibre-gl@3.3.1/dist/maplibre-gl.css" rel="stylesheet" />

		<!-- Supabase -->
		<script src="https://unpkg.com/@supabase/supabase-js@2"></script>

		<!-- Custom styles -->
		<link href="css/styles.css" rel="stylesheet" />
	</head>
	<body>
		<div class="container">
			<!-- Map container -->
			<div id="map"></div>

			<!-- Sidebar for task details -->
			<div id="sidebar" class="sidebar hidden">
				<div class="sidebar-header">
					<h2 id="location-title">Location Details</h2>
					<button id="close-sidebar" class="close-button" aria-label="Close">&times;</button>
				</div>
				<div class="sidebar-content">
					<div id="location-details">
						<h3>Location Information</h3>
						<div id="location-info"></div>

						<h3>Tasks</h3>
						<div id="tasks-list"></div>

						<div class="add-task-section">
							<h3>Add New Task</h3>
							<form id="add-task-form">
								<textarea id="task-info" placeholder="Enter task info (first line will be the title)" required rows="4"></textarea>
								<button type="submit" class="button">Add Task</button>
							</form>
						</div>
					</div>
				</div>
			</div>
		</div>

		<!-- Add Location Sheet -->
		<div id="location-sheet" class="location-sheet hidden">
			<div class="sheet-header">
				<div>
					<h2>Add New Location</h2>
				</div>
				<button id="close-location-sheet" class="close-button" aria-label="Close">&times;</button>
			</div>
			<div class="sheet-content">
				<form id="add-location-form">
					<div class="form-group">
						<label for="location-name">Location Name</label>
						<input type="text" id="location-name" required autocomplete="off" />
					</div>

					<div class="form-group">
						<label>Coordinates</label>
						<div class="coordinates-display">
							<span id="selected-coordinates">Tap anywhere on the map to set the location</span>
						</div>
					</div>

					<div class="form-group">
						<label for="location-info">Location Information</label>
						<textarea id="location-info" required rows="6" placeholder="Enter information about this location"></textarea>
					</div>

					<div class="form-actions">
						<button type="submit" class="button">Save Location</button>
						<button type="button" class="button button-secondary" id="cancel-location">Cancel</button>
					</div>
				</form>
			</div>
			<div class="safe-area-bottom"></div>
		</div>

		<!-- Scripts -->
		<script src="js/config.js"></script>
		<script src="js/data.js"></script>
		<script src="js/app.js"></script>
	</body>
</html>
